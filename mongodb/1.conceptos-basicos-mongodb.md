# Conceptos básicos

MongoDB é unha das BBDD NoSQL máis coñecidas e usadas. Segue un **modelo documental**, empregando documentos **BSON**, baseados en JSON.  
O seu nome provén de *huMONGOus* (xigantesco).

![logo MongoDB](images/mongo-logo.png)

---

# Características principais

- **Esquemas dinámicos:** documentos dunha mesma colección poden ter estruturas diferentes e modificarse ao longo do tempo.  
- **Xoins dispoñibles:** nas últimas versións é posible realizar *joins*, mesmo sobre coleccións particionadas.  
- **Transaccións:** soporta transaccións a nivel de aplicación, non a nivel estrito como as BBDD relacionais.

---

# Conceptos básicos estruturais

- Unha **instancia de MongoDB** pode conter **0 ou máis bases de datos**.  
- Cada **base de datos** pode ter **0 ou máis coleccións** (equivalente ás táboas nun SGBDR).

## Tipos de coleccións
- **Coleccións normais:** tamaño variable.  
- **Coleccións *capped*:** teñen un tamaño predefinido e comportan como estruturas circulares.

## Documentos
- As coleccións conteñen **0 ou máis documentos**, equivalentes ás filas dunha táboa relacional.
- Cada documento está composto por **pares clave/valor**, equivalentes aos atributos dun rexistro.
- *A diferenza das BBDDR, os documentos dunha mesma colección non teñen por que compartir o mesmo esquema.*

## Índices
- MongoDB soporta **índices** para acelerar as buscas, igual que os SGBDR.

![Estrutura de MongoDB](images/mongo-estrutura.png)

---

# Formato BSON

MongoDB almacena os datos en **BSON (Binary JSON)**, unha extensión binaria de JSON que:

- Permite almacenar datos en binario.  
- Inclúe tipos que JSON non soporta (ObjectId, Date, Decimal128, etc.).

---

## Tipos de datos en BSON

| Tipo                        | Número | Alias                    | Notas                               |
|----------------------------|--------|---------------------------|--------------------------------------|
| Double                     | 1      | "double"                |                                      |
| String                     | 2      | "string"                |                                      |
| Object                     | 3      | "object"                |                                      |
| Array                      | 4      | "array"                 |                                      |
| Binary data                | 5      | "binData"               |                                      |
| Undefined                  | 6      | "undefined"             | *Deprecated*                         |
| ObjectId                   | 7      | "objectId"              |                                      |
| Boolean                    | 8      | "bool"                  |                                      |
| Date                       | 9      | "date"                  |                                      |
| Null                       | 10     | "null"                  |                                      |
| Regular Expression         | 11     | "regex"                 |                                      |
| DBPointer                  | 12     | "dbPointer"             | *Deprecated*                         |
| JavaScript                 | 13     | "javascript"            |                                      |
| Symbol                     | 14     | "symbol"                | *Deprecated*                         |
| JavaScript code with scope | 15     | "javascriptWithScope"   | *Deprecated en MongoDB 4.4*          |
| 32-bit integer             | 16     | "int"                   |                                      |
| Timestamp                  | 17     | "timestamp"             |                                      |
| 64-bit integer             | 18     | "long"                  |                                      |
| Decimal128                 | 19     | "decimal"               |                                      |
| Min key                    | -1     | "minKey"                |                                      |
| Max key                    | 127    | "maxKey"                |                                      |

---

# Restricións dos documentos BSON

- Non poden superar os **16 MB** por documento.  
- O atributo **_id** está reservado como chave primaria.  
- Aínda que agora os nomes de campos poden comezar por **$** ou conter **"."**, **non é recomendable** por motivos de compatibilidade e boas prácticas.
